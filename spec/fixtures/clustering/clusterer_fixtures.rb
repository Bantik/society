# Reference results were calculated using the `minimcl` perl script from
# release 14-137 of the MCL-edge library. http://micans.org/mcl

require 'set'

module MCL

  def self.graph_from_edges(path)
    full_path = File.join(File.dirname(__FILE__), path)
    nodes = Set.new
    edges = []
    edges_with_weights = /(\S+)\s+(\S+)\s+(\S+)/
    edges_only = /(\S+)\s+(\S+)/
    File.readlines(full_path).each do |line|
      if data = line.match(edges_with_weights)
        a,b,weight = data[1..-1]
        # FIXME: disregarding weight for now -- include it once we have
        #        weights in Edges
        edges << Society::Edge.new(from: a.to_i, to: b.to_i)
        nodes << a << b
      elsif data = line.match(edges_only)
        a,b = data[1..-1]
        edges << Society::Edge.new(from: a.to_i, to: b.to_i)
        nodes << a << b
      end
    end
    Society::ObjectGraph.new(nodes: nodes.to_a, edges: edges)
  end

  GRAPH_1 = graph_from_edges('edges_1.txt')

  CLUSTERS_1 = [
    [9, 10, 19, 24, 25, 26, 28, 29, 30, 39, 58, 68, 102, 189, 198, 200],
    [46, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139],
    [0, 1, 4, 11, 38, 49, 52, 59, 60, 61, 71, 125],
    [109, 110, 144, 145, 146, 147, 148, 149],
    [81, 121, 122, 184, 185, 188],
    [12, 31, 32, 79, 91, 124],
    [7, 47, 53, 54, 78, 82],
    [33, 83, 96, 113, 119],
    [17, 55, 56, 57, 65],
    [13, 42, 115, 120],
    [14, 15, 27, 190],
    [43, 90, 99, 118],
    [173, 175, 193],
    [88, 116, 117],
    [73, 143, 176],
    [77, 114, 116],
    [20, 69, 103],
    [41, 44, 112],
    [16, 97, 98],
    [3, 23, 126],
    [183, 186],
    [100, 101],
    [107, 108],
    [70, 104],
    [87, 106],
    [86, 105],
    [50, 140],
    [67, 95],
    [85, 94],
    [8, 111],
    [66, 92],
    [2, 84],
    [182],
    [93]]

  CLUSTERS_1_I17 = [
    [8, 9, 10, 13, 14, 15, 17, 19, 20, 24, 25, 26, 27, 28, 29, 30, 39, 41, 42, 43, 44, 55, 56, 57, 58, 65, 68, 69, 93, 102, 103, 111, 112, 115, 120, 189, 190, 198, 200],
    [46, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139],
    [0, 1, 4, 11, 38, 49, 52, 59, 60, 61, 71, 125],
    [33, 83, 90, 96, 99, 113, 118, 119],
    [109, 110, 144, 145, 146, 147, 148, 149],
    [2, 7, 47, 53, 54, 78, 82, 84],
    [70, 86, 87, 104, 105, 106],
    [81, 121, 122, 184, 185, 188],
    [12, 31, 32, 79, 91, 124],
    [73, 143, 173, 176],
    [88, 116, 117],
    [77, 114, 116],
    [16, 97, 98],
    [3, 23, 126],
    [183, 186],
    [100, 101],
    [50, 140],
    [175, 193],
    [107, 108],
    [66, 92],
    [67, 95],
    [85, 94],
    [182]]

  CLUSTERS_1_I40 = [
    [46, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139],
    [10, 28, 29, 30, 39, 58, 146, 198, 200],
    [109, 110, 144, 145, 147, 148, 149],
    [81, 121, 122, 184, 185, 188],
    [7, 47, 53, 54, 78, 82],
    [14, 15, 24, 27, 190],
    [0, 4, 38, 60, 125],
    [13, 42, 115, 120],
    [31, 32, 91, 124],
    [17, 55, 56, 65],
    [73, 143, 176],
    [20, 69, 103],
    [41, 44, 112],
    [33, 83, 113],
    [3, 23, 126],
    [16, 97, 98],
    [175, 193],
    [107, 108],
    [183, 186],
    [100, 101],
    [70, 104],
    [43, 118],
    [68, 102],
    [88, 117],
    [19, 189],
    [50, 140],
    [86, 105],
    [77, 114],
    [87, 106],
    [8, 111],
    [67, 95],
    [25, 26],
    [85, 94],
    [12, 79],
    [11, 49],
    [52, 71],
    [66, 92],
    [2, 84],
    [1, 61],
    [119],
    [173],
    [116],
    [182],
    [57],
    [93],
    [90],
    [99],
    [59],
    [96],
    [9]]
end
